# Global configuration
global:
  domain: argocd.{{CLUSTER_DOMAIN}}

server:
  # Enable insecure mode for local development
  insecure: true
  
  # Configure service to use HTTP
  service:
    type: ClusterIP
    port: 80
    targetPort: 8080
  
  # Configure ingress for external access
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      nginx.ingress.kubernetes.io/force-ssl-redirect: "false"
      nginx.ingress.kubernetes.io/ssl-redirect: "false"
      nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
      nginx.ingress.kubernetes.io/ssl-passthrough: "false"
      nginx.ingress.kubernetes.io/rewrite-target: /
    hosts:
      - host: argocd.{{CLUSTER_DOMAIN}}
        paths:
          - path: /
            pathType: Prefix
  
  # Additional arguments for insecure mode
  extraArgs:
    - --insecure

# Configure server parameters according to official documentation
configs:
  params:
    server.insecure: true
    server.url: "http://argocd.{{CLUSTER_DOMAIN}}:{{HTTP_PORT}}"

  # autoscaling:
  #   enabled: true
  #   minReplicas: 2
  #   maxReplicas: 5
  #   targetCPUUtilizationPercentage: 80
  #   targetMemoryUtilizationPercentage: 80

  # verticalPodAutoscaler:
  #   enabled: true
  #   updateMode: "Auto"
  #   controlledResources: ["cpu", "memory"]
  #   minAllowed:
  #     cpu: 100m
  #     memory: 128Mi
  #   maxAllowed:
  #     cpu: 1
  #     memory: 1Gi
